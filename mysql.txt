DROP DATABASE IF EXISTS `msi_quickview`;

CREATE DATABASE IF NOT EXISTS `msi_quickview` DEFAULT CHARACTER SET utf8 ;

USE `msi_quickview` ;

CREATE TABLE IF NOT EXISTS `msi_quickview`.`account` (
  `username` VARCHAR(50) NOT NULL,
  `password` VARCHAR(256) NOT NULL,
  `user_role` VARCHAR(20) NOT NULL DEFAULT 'regular',
  `status` VARCHAR(10) NOT NULL DEFAULT 'ACTIVE',
  `email` VARCHAR(100) NOT NULL,
  `salt` VARCHAR(100) NOT NULL,
  `host` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`username`),
  UNIQUE INDEX `username_UNIQUE` (`username` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


CREATE TABLE IF NOT EXISTS `msi_quickview`.`security_question` (
  `id` TINYINT(3) UNSIGNED NOT NULL AUTO_INCREMENT,
  `question` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8;

CREATE TABLE IF NOT EXISTS `msi_quickview`.`account_security_question` (
  `username` VARCHAR(50) NOT NULL,
  `security_question_id` TINYINT(3) UNSIGNED NULL DEFAULT NULL,
  `answer` VARCHAR(50) NOT NULL,
  `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id` (`id` ASC),
  INDEX `username` (`username` ASC),
  CONSTRAINT `username_fk`
    FOREIGN KEY (`username`)
    REFERENCES `msi_quickview`.`account` (`username`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

INSERT INTO `security_question`(`question`) VALUES
	('What is your favorite food?'),
	("What are the last four digits of your vehicle's VIN number?"),
	('What was your childhood nickname?'),
	('What is the last name of the teacher who gave you your first failing grade?'),
	('Where did you have your first kiss?'),
	('What was the first name of your very first girl friend or boy friend?');